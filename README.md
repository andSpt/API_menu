## Проект API меню "Restaurant"


#### Проект на FastAPI с использованием:<br> 
#### PostgreSQL - база данных<br> 
#### Redis - кэширования с полной инвалидацией<br>
#### RabbitMQ и Celery - отправка электронных писем пользователям для подтверждения регистрации<br> 
#### Аутентификация и авторизация (JWT-токен, pyjwt, bcrypt)<br>
#### 4-и сущности (один-ко-многим): меню, подменю, блюдо; модели пользователей<br> 
#### Все CRUD операции (SQL Alchemy, миграции  - Alembic, Pydantic - валидация, преобразование данных)
Реализован паттерн Репозиторий и Сервисный слой


Зависимости:
* У меню есть подменю, которые к ней привязаны.
* У подменю есть блюда.

Условия:
* Блюдо не может быть привязано напрямую к меню, минуя подменю.
* Блюдо не может находиться в 2-х подменю одновременно.
* Подменю не может находиться в 2-х меню одновременно.
* Если удалить меню, должны удалиться все подменю и блюда этого меню.
* Если удалить подменю, должны удалиться все блюда этого подменю.
* Цены блюд выводить с округлением до 2 знаков после запятой.
* Во время выдачи списка меню, для каждого меню добавлять кол-во подменю и блюд в этом меню.
* Во время выдачи списка подменю, для каждого подменю добавлять кол-во блюд в этом подменю.
* Во время запуска тестового сценария БД должна быть пуста.


## Запуск API

[Docker](https://www.docker.com/) должен быть установлен

Запустите Docker и введите команду, находясь в корне проекта:

```bash
$ docker-compose -f db_app.yaml up -d
```
#### API доступно по адрессу 127.0.0.1:8040

#### Swagger 127.0.0.1:8040/docs

## Остановка API

Остановить все сервисы без удаления тома::

```bash
$ docker-compose -f db_app.yaml down
```

Остановить все сервисы с удалением тома:

```bash
$ docker-compose -f db_app.yaml down -v
```
## Запуск тестов


```bash
$ docker-compose -f db_test.yaml up -d
```

Чтобы посмотреть логи тестов:

```bash
$ docker logs app_test 
```

## Остановка тестов

Остановить все сервисы с удалением тома:

```bash
$ docker-compose -f db_test.yaml down -v
```